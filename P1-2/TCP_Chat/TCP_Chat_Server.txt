import java.io.*;
import java.net.*;
import java.net.ServerSocket;
import java.net.Socket;

public class TCP_Chat_Server 
{   
   public static void main(String[] args) 
    {
        try
        {
            /*To establish Connection */
            int port = 7777;
            ServerSocket ss = new ServerSocket(port);
            System.out.println("Waiting for client...");
            Socket s = ss.accept();
            System.out.println("Connection is done...");
            while(true)
            {
                /*To read message received from client*/
                BufferedReader br1 = new BufferedReader(new InputStreamReader(s.getInputStream()));
                String ctext = br1.readLine();
                System.out.println("Client Text:"+ ctext);
                
                BufferedReader br2 = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("Enter Text:");
                String stext = br2.readLine();
                
                PrintWriter pw = new PrintWriter(new OutputStreamWriter(s.getOutputStream()));
                pw.println(stext);
                pw.flush();
                
                if(stext.equalsIgnoreCase("bye"))
                {
                    System.exit(0);
                }
            }
        }  
        
        catch(Exception e)
        {
            System.out.println("Error"+e);
        }
    }
}
   